import pyautogui as pag
from pynput import mouse
import time

input("Opening BTD5... (press enter when btd5 is open and logged into the home screen)")
locs = [[829, 932, 4.173999786376953], [528, 281, 5.747639417648315], [620, 411, 7.251850366592407], [1269, 463, 8.640041828155518], [985, 743, 12.894224643707275], [1719, 616, 14.75115418434143], [491, 505, 16.408332586288452], [491, 505, 17.020334720611572], [1529, 613, 18.133726596832275], [1529, 613, 18.513736724853516], [1535, 508, 19.13303852081299], [1535, 508, 19.55073618888855], [1535, 508, 20.042797088623047], [1516, 517, 20.682048797607422], [1312, 378, 22.447473764419556], [896, 568, 23.288065671920776], [1729, 481, 24.320299863815308], [625, 533, 26.385812044143677], [625, 533, 27.153943300247192], [1544, 778, 28.53473424911499], [1560, 788, 29.395347595214844], [1562, 490, 30.09986925125122], [1562, 489, 30.507369995117188], [1562, 489, 30.903820753097534], [1562, 489, 31.32432198524475], [856, 738, 32.3162841796875], [1832, 239, 33.661574363708496], [698, 537, 35.606093883514404], [698, 537, 36.64212942123413], [1589, 797, 37.571231842041016], [1589, 797, 37.95912456512451], [1589, 797, 38.391536712646484], [1589, 797, 38.79917764663696], [1585, 659, 39.296534299850464], [1585, 659, 39.712729692459106], [997, 749, 40.99228239059448], [1731, 877, 42.46152591705322], [1155, 292, 43.95834445953369], [1155, 292, 44.715596199035645], [344, 632, 45.74337410926819], [344, 632, 46.235727071762085], [344, 632, 47.55230402946472], [345, 493, 48.464237689971924], [345, 493, 48.929325342178345], [90, 390, 50.425102949142456], [1124, 644, 51.35072565078735], [1726, 478, 55.40436315536499], [497, 562, 56.993308305740356], [497, 562, 58.05369544029236], [1571, 761, 59.89044809341431], [1571, 761, 60.39412593841553], [1561, 447, 61.59138774871826], [1561, 447, 62.00397276878357], [1547, 763, 62.615910053253174], [783, 734, 64.81734943389893], [1831, 992, 66.76668190956116], [1831, 992, 67.54306960105896], [965, 907, 378.3396337032318], [706, 871, 380.53227281570435]]
# start_time = time.time()
#
#
# def on_click(x, y, button, pressed):
#     if button == mouse.Button.left and pressed is True:
#         s = time.time() - start_time
#         print(f"left mouse pressed at ({x}, {y}, {s})")
#         locs.append([x, y, s])
#     if button == mouse.Button.right and pressed is True:
#         print(locs)
#
#
# listener = mouse.Listener(on_click=on_click)
# listener.start()
# listener.join()
time.sleep(5)
start_money = 142
money = 16
while True:
    prev_s = 0
    start_time = time.time()
    for x, y, s in locs:
        duration = s - prev_s
        # if duration < 10:  # Reduce time
        #     duration = 0.5
        pag.moveTo(x, y, duration=duration)
        pag.click()
        prev_s = s
    end_time = time.time()
    money += 16
    print(f"\rEarned {money - start_money} money. Total now at {money}. Took {end_time - start_time} seconds.", end="")
